{% load staticfiles %}
<html>
    <head>
        <link href={% static '/css/main.css'%} rel="stylesheet" type="text/css"/>
        <script src={% static '/js/paging.js' %} type="text/javascript"></script>
        <script src={% static '/js/jquery-3.3.1.min.js' %} type="text/javascript"></script>
        <meta charset="utf-8">
     <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
<div class="my-stock">
    我的股票
</div>
<div class="large-market">
大盘展示图
</div>
<div class="news">
新浪新闻
</div>
<div class="stock-sequence">
<div style="float: left">
 <table id="sequence-box">
    <tr>
         {% csrf_token %}
            <td>序号</td>
            <td >TS代码</td>
            <td>昨收价 <div>
                <img src="{% static "/image/up.png" %}" width="15px">
                <img src="{% static "/image/down.png" %}" width="15px">
                </div></td>
            <td>今开价<div>
                <img src="{% static "/image/up.png" %}" width="15px">
                <img src="{% static "/image/down.png" %}" width="15px">
                </div></td>
            <td>最高价<div>
                <img src="{% static "/image/up.png" %}" width="15px">
                <img src="{% static "/image/down.png" %}" width="15px">
                </div></td>
            <td>今收价<div>
                <img src="{% static "/image/up.png" %}" width="15px">
                <img src="{% static "/image/down.png" %}" width="15px">
                </div></td>
            <td>涨幅(%)
                <div>
                <img src="{% static "/image/up.png" %}" width="15px">
                <img src="{% static "/image/down.png" %}" width="15px">
                </div>
            </td>
            <td>涨跌<div>
                <img src="{% static "/image/up.png" %}" width="15px">
                <img src="{% static "/image/down.png" %}" width="15px">
                </div> </td>
            <td>成交额(千元)<div>
                <img src="{% static "/image/up.png" %}" width="15px">
                <img src="{% static "/image/down.png" %}" width="15px">
                </div></td>

            <td>操作</td>
        </tr>
    <tbody id="paging_table">
   {% for stock in upStockList %}
        <tr>
            <td>{{ forloop.counter }}</td>
            <td id="ts_code">{{ stock.ts_code}}</td>
            <td>{{ stock.pre_close}}</td>
            <td>{{ stock.open}}</td>
            <td>{{ stock.high}}</td>
            <td>{{ stock.close}}</td>
            <td>{{ stock.pct_chg}}</td>
            <td>{{ stock.change}}</td>
            <td>{{ stock.amount}}</td>
            <td><button  class="show-details-bt" type="button" id="show_detail" onclick="to_stockDetails(this)">查看更多详情</button></td>
        </tr>
    {% endfor %}
    </tbody>
    </table>
    <div class="paging">
        <span id="spanFirst">第一页</span>
        <span id="spanPre">上一页</span>
        第<span id="spanPageNum"></span>页/共
        <span id="spanTotalPage"></span>页
        <span id="spanNext">下一页</span>
         <span id="spanLast">最后一页</span>
     </div>
</div>
</div>
</body>
<script>
var theTable = document.getElementById("paging_table");
var totalPage = document.getElementById("spanTotalPage");
var pageNum = document.getElementById("spanPageNum");
var spanPre = document.getElementById("spanPre");
var spanNext = document.getElementById("spanNext");
var spanFirst = document.getElementById("spanFirst");
var spanLast = document.getElementById("spanLast");
var numberRowsInTable = theTable.rows.length;
var pageSize = 10;
var page = 1;
paging()
 function to_stockDetails(obj){
     var post_data={
         "ts_code":$(obj).parents("tr").find("#ts_code").text(),
         "csrfmiddlewaretoken":$("[name='csrfmiddlewaretoken']").val()
     }
     $.ajax({
                url:  '/query_stockDetails/',
                type: "POST",
                data: post_data,
                success: function (data) {
                    window.location.href="/show_stockDetails/"
                }
            });
 }

 function sort(){

 }
</script>
</html>